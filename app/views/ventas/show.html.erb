<div class="container mt-4">
  <h1 class="mb-4">Detalles de la Venta</h1>

  <div class="card p-3 mb-4 shadow-sm">
    <div class="row">
      <div class="col-md-6">
        <p><strong>Empleado:</strong> <%= @venta.usuario.nombre %></p>
        <p><strong>Fecha:</strong> <%= @venta.created_at.strftime("%d/%m/%Y") %></p>
        <p><strong>Hora:</strong> <%= @venta.created_at.strftime("%H:%M") %></p>
      </div>
      <div class="col-md-6">
        <p><strong>Cliente:</strong> <%= @venta.cliente %></p>
        <p><strong>Estado:</strong> <span class="badge bg-warning"><%= @venta.estado %></span></p>
      </div>
    </div>
    <h4 class="text-end mt-3">Total: <strong class="text-success">$<%= number_to_currency(@venta.total, unit: "", separator: ",", delimiter: ".") %></strong></h4>
  </div>

  <h2 class="mb-3">Productos</h2>
  <table class="table table-striped shadow-sm">
    <thead class="table-dark">
      <tr>
        <th>Producto</th>
        <th class="text-center">Cantidad</th>
        <th class="text-end">Precio Unitario</th>
        <th class="text-end">Subtotal</th>
      </tr>
    </thead>
    <tbody>
      <% @venta.venta_productos.each do |vp| %>
        <tr>
          <td><%= vp.producto.nombre %></td>
          <td class="text-center"><%= vp.cantidad %></td>
          <td class="text-end">$<%= number_to_currency(vp.producto.precio, unit: "", separator: ",", delimiter: ".") %></td>
          <td class="text-end">$<%= number_to_currency(vp.cantidad * vp.producto.precio, unit: "", separator: ",", delimiter: ".") %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="text-center mt-4">
    <a href="<%= ventas_path %>" class="btn btn-secondary btn-lg">ðŸ”™ Volver</a>
  </div>
</div>
